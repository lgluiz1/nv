<div class="modal-header bg-primary text-white">
    <h5 class="modal-title"><i class="bi bi-pencil-square me-2"></i>Editar Manifesto #{{ manifesto.numero_manifesto }}</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>

<form id="formEditarManifesto" onsubmit="salvarEdicaoManifesto(event, '{{ manifesto.id }}')">
    <div class="modal-body">
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label small fw-bold text-muted">Número do Manifesto</label>
                <input type="text" class="form-control bg-light" value="{{ manifesto.numero_manifesto }}" readonly title="Não é permitido alterar o número do manifesto">
                <input type="hidden" name="numero_manifesto" value="{{ manifesto.numero_manifesto }}">
            </div>

            <div class="col-md-6">
                <label class="form-label small fw-bold">Status Atual</label>
                <select name="status" class="form-select">
                    {% for val, label in manifesto.STATUS_CHOICES %}
                    <option value="{{ val }}" {% if manifesto.status == val %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-12">
                <label class="form-label small fw-bold text-muted">Motorista Responsável</label>
                <input type="text" class="form-control bg-light" value="{{ manifesto.motorista.nome_completo }}" readonly title="O motorista é vinculado pelo aplicativo">
            </div>

            <div class="col-md-12">
                <label class="form-label small fw-bold">Filial</label>
                <select name="filial" class="form-select">
                    {% for f in filiais %}
                    <option value="{{ f.id }}" {% if manifesto.filial.id == f.id %}selected{% endif %}>{{ f.nome }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label small fw-bold">KM Inicial</label>
                <input type="number" step="0.01" name="km_inicial" class="form-control" value="{{ manifesto.km_inicial|default:''|stringformat:'.2f' }}">
            </div>
            <div class="col-md-6">
                <label class="form-label small fw-bold">KM Final</label>
                <input type="number" step="0.01" name="km_final" class="form-control" value="{{ manifesto.km_final|default:''|stringformat:'.2f' }}">
            </div>
            
            <div class="col-md-12">
                <div class="form-check form-switch mt-2">
                    <input class="form-check-input" type="checkbox" name="finalizado" id="checkFinalizado" {% if manifesto.finalizado %}checked{% endif %}>
                    <label class="form-check-label fw-bold" for="checkFinalizado">Marcar como Finalizado</label>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer bg-light">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-primary px-4">
            <i class="bi bi-save me-1"></i> Atualizar Dados
        </button>
    </div>
</form>
<script>
   
</script>